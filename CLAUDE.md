# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

DevFlow·AI is a technical blog built with Hugo Extended + PaperMod theme, focused on frontend development and AI-assisted programming practices (Cursor, Claude Code, Kiro, etc.). The site is deployed on Cloudflare Workers with static assets and custom Worker script capabilities.

## Common Development Commands

### Local Development
```bash
# Quick start (recommended)
./dev

# Create new post interactively
./new

# Or create post with options
./new "My Post Title" -d "Description" -t "tag1,tag2"

# Or manually:
# Install Hugo Module dependencies
hugo mod tidy

# Start local development server (includes drafts)
hugo server -D -e development

# Build production site
hugo --gc --minify
# or use the build script (auto-downloads Hugo if needed)
bash build.sh
```

### Deployment
```bash
# Login to Cloudflare
wrangler login

# Preview with local Workers sandbox
wrangler dev

# Deploy to Cloudflare Workers
wrangler deploy
```

## Architecture

### Tech Stack
- **Static Site Generator**: Hugo Extended v0.148+ (Go-based)
- **Theme**: PaperMod (installed via Hugo Modules)
- **Hosting**: Cloudflare Workers Static Assets
- **Edge Computing**: Cloudflare Workers (src/worker.js)
- **Domain**: devflow.950288.xyz

### Hugo Template System (v0.146.0+)
Hugo introduced a new template system in v0.146.0. Key changes:
- Removed `_default` folder requirement
- Renamed `partials` → `_partials`, `shortcodes` → `_shortcodes`
- Simplified template lookup hierarchy
- Templates now go directly in `layouts/` instead of `layouts/_default/`
- Example: `layouts/home.html` instead of `layouts/_default/index.html`

**Note**: PaperMod theme handles most templates, but custom layouts should follow the new structure.

### Key Directories
- `/config/`: Modular Hugo configuration (TOML format)
- `/content/posts/`: Blog posts in Markdown
- `/src/worker.js`: Cloudflare Worker script for API routes
- `/public/`: Hugo build output (gitignored, generated by build)
- `/docs/`: Deployment documentation

### Build Process
1. `build.sh` checks for existing Hugo installation
2. If not found, downloads Hugo Extended to temp directory
3. Runs `hugo --gc --minify` to build optimized static files
4. Wrangler uploads `/public/` to Cloudflare via assets binding

### Deployment Architecture
- Static files served from Cloudflare edge nodes
- Worker script intercepts requests for dynamic functionality
- `/api/*` routes can be added to worker.js for backend features
- HTML auto-trailing-slash and 404 page handling configured

## Configuration Structure
- Main config: `/config/_default/hugo.toml`
- Parameters: `/config/_default/params.toml`
- Navigation: `/config/_default/menus.toml`
- Module deps: `/config/_default/module.toml`
- Production overrides: `/config/production/`

## Future Features (TODO)
- Algolia instant-search integration
- Giscus comments system
- GitHub Actions CI for daily builds
- Automated Lighthouse reports